name: Lint

on:
  workflow_call:

  push:
    branches: [main]

  pull_request:
    branches: [main]

jobs:
  report-new-dependencies:
    runs-on: ubuntu-20.04
    if: github.event_name == 'pull_request' && github.actor != 'dependabot[bot]'
    steps:
      - name: Check out repository
        uses: actions/checkout@v3

      - name: Check for new dependencies
        uses: hiwelo/new-dependencies-action@1.0.1
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          pull_number: ${{ github.event.pull_request.number }}

      - name: "Deps: show dependencies metadata"
        uses: lirantal/github-action-new-dependencies-advisor@v1.1.1
        id: check_for_new_dependencies
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
